# ConventionCrasher Project Structure

This document defines the standard directory and file structure for the ConventionCrasher Next.js application. Adhering to this structure will ensure consistency and maintainability.

```plaintext
agile_test/
├── .bmad-core/                 # BMAD core agent configuration files
├── .bmad-v3-backup/            # BMAD v3 backup files
├── .git/                       # Git repository data
├── .next/                      # Next.js build output (generated)
├── .swc/                       # SWC compiler cache (generated)
├── .vscode/                    # VSCode editor settings
├── __mocks__/                  # Jest manual mocks
│   ├── @panva/
│   ├── jose.js
│   ├── preact-render-to-string.js
│   ├── preact.js
│   └── uuid.js
├── @/                          # Path alias symlink to src/ (for @/ imports)
├── ai/                         # AI-related files (epics, stories, templates)
│   ├── epics/
│   ├── stories/
│   └── templates/
├── bmad-agent/                 # BMAD agent configuration and personas
│   ├── checklists/
│   ├── data/
│   ├── personas/
│   ├── tasks/
│   └── templates/
├── custom-modes/               # Custom agent modes
├── dist_scripts/               # Distribution scripts
├── docs/                       # Project documentation (PRD, Architecture, Epics, etc.)
│   ├── architecture.md
│   ├── tech-stack.md
│   ├── project-structure.md    # This file
│   ├── data-models.md
│   ├── api-reference.md
│   ├── environment-vars.md
│   ├── coding-standards.md
│   ├── testing-strategy.md
│   ├── ui-ux.md
│   ├── epic1.md
│   └── ...                     # Other .md files
├── frontend/                   # Frontend-specific files (separate from main src)
│   ├── jest.config.js
│   ├── src/
│   └── tsconfig.json
├── lib/                        # Additional shared libraries (root level)
├── node_modules/               # Node.js dependencies (generated)
├── playwright-report/          # Playwright test reports (generated)
├── prisma/                     # Prisma ORM files
│   ├── schema.prisma           # Main database schema definition
│   ├── migrations/             # Database migration files (generated by Prisma)
│   ├── seed.sql                # SQL seed data
│   └── seed.ts                 # Script for seeding database with initial data
├── prompts/                    # AI prompts and templates
├── public/                     # Static assets directly served at the root
│   ├── images/                 # E.g., favicons, static site logos
│   └── ...
├── scripts/                    # Utility scripts
├── src/                        # Main application source code
│   ├── app/                    # Next.js App Router: Pages, Layouts, API Routes
│   │   ├── api/                # API routes (e.g., src/app/api/conventions/route.ts)
│   │   │   ├── auth/
│   │   │   │   └── [...nextauth]/
│   │   │   │       └── route.ts # Auth.js route handler
│   │   │   └── organizer/
│   │   │       └── venues/
│   │   │           └── [venueId]/
│   │   │               └── route.ts # Venue management routes
│   │   ├── (auth)/             # Auth-related pages (e.g., login, register)
│   │   │   └── login/
│   │   │       └── page.tsx
│   │   ├── (main)/             # Main application pages after login
│   │   │   ├── layout.tsx
│   │   │   └── conventions/
│   │   │       └── page.tsx
│   │   ├── layout.tsx          # Root layout
│   │   ├── page.tsx            # Root page (homepage)
│   │   └── globals.css         # Global styles
│   ├── components/             # Reusable React components (UI)
│   │   ├── ui/                 # General-purpose UI components (e.g., buttons, cards - often from MUI or customized)
│   │   ├── layout/             # Layout components (e.g., Header, Footer, Sidebar)
│   │   ├── features/           # Components specific to certain features (e.g., ConventionCard, ProfileForm)
│   │   ├── shared/             # Shared components across features
│   │   └── organizer/          # Organizer-specific components
│   ├── hooks/                  # Custom React hooks
│   ├── lib/                    # Shared libraries, helper functions, core logic
│   │   ├── actions.ts          # Server Actions (data mutations, server-side logic callable from components)
│   │   ├── auth.ts             # Auth.js configuration options and helper functions
│   │   ├── db.ts               # Prisma client instance and database utilities
│   │   ├── utils.ts            # General utility functions
│   │   └── validators.ts       # Validation schemas/functions (e.g., with Zod)
│   ├── middleware.ts           # Next.js middleware (e.g., for route protection)
│   ├── middleware.test.ts      # Tests for middleware
│   ├── next-auth.d.ts          # NextAuth type definitions
│   ├── pages/                  # Legacy Pages Router files (for migration)
│   └── types/                  # Shared TypeScript type definitions
│       └── index.ts
├── test-results/               # Test result files (generated)
├── tests/                      # Automated tests
│   ├── admin/                  # Admin-specific tests
│   ├── e2e/                    # End-to-end tests (e.g., with Playwright)
│   ├── admin.auth.setup.ts     # Admin auth setup for tests
│   └── auth.setup.ts           # Auth setup for tests
├── .env.local                  # Local environment variables (git-ignored)
├── .eslintignore
├── .eslintrc.json              # ESLint configuration (legacy)
├── .gitignore
├── CONTRIBUTING.md             # Contribution guidelines
├── LICENSE                     # Project license
├── README.md                   # Project documentation
├── conventioncrasher_backup.dump # Database backup
├── conventioncrasher_dev.sql   # Development database SQL
├── copy.env.local              # Environment variables template
├── docker-compose.yml          # Docker configuration
├── eslint.config.mjs           # ESLint configuration (new flat config)
├── jest.config.cjs             # Jest configuration
├── jest.setup.js               # Jest setup file
├── jest.setup.ts               # Jest setup file (TypeScript)
├── next.config.cjs             # Next.js configuration
├── next-env.d.ts               # Next.js type definitions (generated)
├── package.json
├── package-lock.json
├── playwright.config.ts        # Playwright configuration
├── postcss.config.mjs          # PostCSS configuration (for Tailwind CSS)
├── studio.ps1                  # PowerShell script for Prisma Studio
├── tsconfig.json               # TypeScript configuration
├── tsconfig.tsbuildinfo        # TypeScript build cache (generated)
├── update-convention-status.sql # Database update script
├── vitest.config.ts            # Vitest configuration
└── vitest.setup.ts             # Vitest setup file
```

## Key Directory Descriptions

* **`.bmad-core/` & `.bmad-v3-backup/`**: BMAD (Business Model Agent Director) configuration and backup files for AI agent system.
* **`ai/`**: AI-related project files including epics, stories, and templates for project planning and development.
* **`bmad-agent/`**: BMAD agent configuration files including personas, checklists, tasks, and templates for different agent roles.
* **`custom-modes/`**: Custom agent modes for specialized AI assistance.
* **`docs/`**: Contains all project planning, architecture, and reference documentation (like this file).
* **`frontend/`**: Separate frontend configuration with its own Jest config and source files.
* **`lib/` (root level)**: Additional shared libraries at the root level.
* **`prisma/`**: Holds the Prisma schema (`schema.prisma`), generated migration files, and seed scripts. This is central for database structure and evolution.
* **`prompts/`**: AI prompts and templates for various development tasks.
* **`public/`**: Stores static assets like images, favicons, etc., that are served directly.
* **`scripts/`**: Utility scripts for development and deployment tasks.
* **`src/`**: The heart of the application code.
    * **`src/app/`**: Core of the Next.js App Router.
        * Route groups like `(auth)`, `(main)` are used for organization without affecting URL paths.
        * `layout.tsx` and `page.tsx` files define UI structure and content for routes.
        * API routes (e.g., `src/app/api/.../route.ts`) handle backend requests.
        * Auth.js handler `src/app/api/auth/[...nextauth]/route.ts` is standard.
    * **`src/components/`**: Contains reusable React components.
        * `ui/`: General-purpose UI components (e.g., buttons, cards - often from MUI or customized).
        * `layout/`: Components defining page structure (headers, footers).
        * `features/`: More complex components tied to specific application features.
        * `shared/`: Shared components across multiple features.
        * `organizer/`: Organizer-specific components and functionality.
    * **`src/hooks/`**: Custom React hooks for reusable state logic.
    * **`src/lib/`**: Shared modules, helper functions, and core logic not directly tied to a UI component or API route.
        * `actions.ts`: Server Actions for data mutations and server-side logic called from components.
        * `auth.ts`: Configuration and helper utilities for Auth.js.
        * `db.ts`: Prisma client instantiation and potentially common database utility functions.
        * `utils.ts`: General, reusable utility functions.
        * `validators.ts`: Data validation schemas (e.g., using Zod) for forms and API inputs.
    * **`src/middleware.ts`**: For Next.js middleware logic (e.g., protecting routes based on authentication status).
    * **`src/pages/`**: Legacy Pages Router files maintained for migration purposes.
    * **`src/types/`**: Global or shared TypeScript type definitions.
* **`tests/`**: Houses automated tests.
    * `admin/`: Admin-specific tests.
    * `e2e/`: End-to-end tests using Playwright.
    * `auth.setup.ts` & `admin.auth.setup.ts`: Authentication setup for tests.
* **Root Directory Files**: 
    * Configuration files for Node.js (`package.json`), Next.js (`next.config.cjs`), TypeScript (`tsconfig.json`), ESLint (`eslint.config.mjs`, `.eslintrc.json`), Jest (`jest.config.cjs`), Vitest (`vitest.config.ts`), Playwright (`playwright.config.ts`), PostCSS (`postcss.config.mjs`), Docker (`docker-compose.yml`), and environment variables.
    * Database files: `conventioncrasher_dev.sql`, `conventioncrasher_backup.dump`, `update-convention-status.sql`.
    * Project documentation: `README.md`, `CONTRIBUTING.md`, `LICENSE`.
* **`@/`**: Path alias symlink to `src/` directory for cleaner imports using `@/` prefix.

## Notes for AI Agent Implementation

* **BMAD Integration:** This project integrates with BMAD (Business Model Agent Director) for AI-assisted development. The `.bmad-core/` and `bmad-agent/` directories contain agent configurations, personas, and templates.
* **AI-Driven Development:** The `ai/` directory contains epics, stories, and templates that guide AI agents in understanding project requirements and generating appropriate code.
* **Custom Agent Modes:** The `custom-modes/` directory provides specialized AI assistant configurations for different development roles (architect, dev, pm, po, ux).
* **Clarity and Convention:** This structure follows common Next.js App Router conventions, making it easier for AI agents familiar with the framework.
* **Separation of Concerns:** Logical separation (UI in `components/` & `app/`, API in `app/api/`, business logic in `lib/actions.ts` or services, data access via `lib/db.ts`) helps agents understand where to find or place specific types of code.
* **Type Definitions:** Centralized (or feature-specific) type definitions in `src/types/` will be crucial for AI understanding and code generation.
* **Reusable Components:** Well-defined reusable components in `src/components/` will be easier for AI to leverage.
* **Path Aliases:** The `@/` alias provides clean import paths that AI agents can use consistently.
* **Testing Strategy:** Multiple testing frameworks (Jest, Vitest, Playwright) are configured with proper setup files for comprehensive testing coverage.
* **Legacy Support:** The `src/pages/` directory maintains legacy Pages Router files for migration purposes.

## Change Log

| Change        | Date       | Version | Description                                     | Author         |
|---------------|------------|---------|-------------------------------------------------|----------------|
| Initial draft | 2025-05-09 | 0.1     | First draft based on Next.js App Router conventions. | Architect Agent |
| Structure update | 2025-01-22 | 0.2     | Updated to reflect actual project structure including BMAD integration, AI directories, multiple testing frameworks, and current file organization. | James (Dev Agent) |

---